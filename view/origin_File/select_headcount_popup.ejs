<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
    <!-- icon -->
    <script src="https://kit.fontawesome.com/611c1b2c45.js" crossorigin="anonymous"></script>
    <!-- css -->
    <link rel="stylesheet" href="style.css">
    <title>select_headcount_popup</title>
    <style>
        .popupContent {
            text-align: center;
        }

        /* 숫자 카운트 박스 공통된 부분  */
        .selectPeople {
            width: 65%;
            height: 5rem;
            background-color: #3D3F4D;
            position: relative;
            margin-bottom: 5rem;
            top: 15%;
            color: #ffffff;
            left: 17.5%;
        }

        /* 확인 버튼 스타일 */
        .selectPeopleBtn {
            height: 4rem;
            width: 11rem;
            font-size: 1.6rem;
            margin-top: 10rem;
            background-color: #DE1E2D;
            color: #ffffff;
            border: none;
            border-radius: 0.5rem;
            font-size: 1.6rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        .selectPeopleBtn:hover {
            background-color: #b41c2b;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .selectPeopleBtn:active {
            background-color: #b41c2b;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .disalbledBtn {
            background-color: #3b3b3b;
            color: #9d9d9d;
            pointer-events: none;
        }

        /* 숫자 선택박스의 텍스트 */
        .ticketTitle {
            text-align: center;
            line-height: 5rem;
            font-size: 1.5rem;
            background-color: #1F1F2F;
            width: 7rem;
            color: #FFFFFF;
            border-radius: 0.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            font-weight: bold;
        }

        /* RadioCss 부분 설명 */
        .number-selection {
            width: 100%;
            display: flex;
            justify-content: space-between;
        }

        .number-selection input[type="checkbox"] {
            display: none;
        }

        .number-selection label {
            display: inline-block;
            cursor: pointer;
            text-align: center;
            width: 4rem;
            flex-grow: 1;
            /* 라벨을 flex-grow로 균등하게 배치 */
            line-height: 5rem;
            font-size: 1.5rem;
            display: inline-block;
            border: 1px solid #3D3F4D;
            background-color: #2A2A2A;
            color: #FFFFFF;
            border-radius: 0.5rem;
            transition: background-color 0.1s, border-color 0.1s;
        }

        .number-selection label:hover {
            background-color: #1F1F1F;
            border-color: #FFDD00;
        }

        /* 라디오 버튼이 체크되었을 때 해당 라벨의 스타일을 변경 */
        .number-selection input[type="checkbox"]:checked+label {
            background-color: #DE1E2D;
            color: white;
        }
    </style>
</head>

<body>
    <!-- ===최상위 컨테이너=== -->
    <div class="wrap">
        <!-- ===레이아웃 영역=== -->
        <section class="layoutArea">
            <!-- ===사이드바 영역=== -->
            <section class="progressSidebar">
                <div class="progressSettings completedStep"><span class="stepLabel">영화<br>선택</span></div>
                <div class="progressSettings completedStep"><span class="stepLabel">시간<br>선택</span></div>
                <div class="progressSettings remainingStep"><span class="stepLabel">좌석<br>선택</span></div>
                <div class="progressSettings remainingStep paymentStep"><span class="stepLabel">결제</span></div>
            </section>
            <!-- ===팝업 영역=== -->
            <section class="popupArea">
                <article class="popupBar">
                    <p class="popupTitle popupBarTextCommon">관람인원을 선택해주세요.</p>
                    <i class="popupBarTextCommon fa-solid fa-x"></i>
                </article>
                <section id="popupContent" class="popupContent">
                    <!-- ~여기에 작성~ -->
                    <div class="adult selectPeople">
                        <div class="number-selection">
                            <div class="ticketTitle">성인</div>

                            <!-- <input type="checkbox" id="adult-0" name="adult" value="0" />
                            <label for="adult-0">0</label> -->

                            <input type="checkbox" id="adult-1" name="adult" value="1" />
                            <label for="adult-1">1</label>

                            <input type="checkbox" id="adult-2" name="adult" value="2" />
                            <label for="adult-2">2</label>

                            <input type="checkbox" id="adult-3" name="adult" value="3" />
                            <label for="adult-3">3</label>

                            <input type="checkbox" id="adult-4" name="adult" value="4" />
                            <label for="adult-4">4</label>

                            <input type="checkbox" id="adult-5" name="adult" value="5" />
                            <label for="adult-5">5</label>

                            <input type="checkbox" id="adult-6" name="adult" value="6" />
                            <label for="adult-6">6</label>

                            <input type="checkbox" id="adult-7" name="adult" value="7" />
                            <label for="adult-7">7</label>

                            <input type="checkbox" id="adult-8" name="adult" value="8" />
                            <label for="adult-8">8</label>
                        </div>
                    </div>
                    <!-- 청소년 부분 숫자 -->
                    <div class="youth selectPeople">
                        <div class="number-selection">
                            <div class="ticketTitle">청소년</div>

                            <!-- <input type="checkbox" id="youth-0" name="youth" value="0" />
                            <label for="youth-0">0</label> -->

                            <input type="checkbox" id="youth-1" name="youth" value="1" />
                            <label for="youth-1">1</label>

                            <input type="checkbox" id="youth-2" name="youth" value="2" />
                            <label for="youth-2">2</label>

                            <input type="checkbox" id="youth-3" name="youth" value="3" />
                            <label for="youth-3">3</label>

                            <input type="checkbox" id="youth-4" name="youth" value="4" />
                            <label for="youth-4">4</label>

                            <input type="checkbox" id="youth-5" name="youth" value="5" />
                            <label for="youth-5">5</label>

                            <input type="checkbox" id="youth-6" name="youth" value="6" />
                            <label for="youth-6">6</label>

                            <input type="checkbox" id="youth-7" name="youth" value="7" />
                            <label for="youth-7">7</label>

                            <input type="checkbox" id="youth-8" name="youth" value="8" />
                            <label for="youth-8">8</label>
                        </div>
                    </div>

                    <!-- 우대 부분 숫자 -->
                    <div class="youth selectPeople">
                        <div class="number-selection">
                            <div class="ticketTitle">우대</div>

                            <!-- <input type="checkbox" id="special-0" name="special" value="0" />
                            <label for="special-0">0</label> -->

                            <input type="checkbox" id="special-1" name="special" value="1" />
                            <label for="special-1">1</label>

                            <input type="checkbox" id="special-2" name="special" value="2" />
                            <label for="special-2">2</label>

                            <input type="checkbox" id="special-3" name="special" value="3" />
                            <label for="special-3">3</label>

                            <input type="checkbox" id="special-4" name="special" value="4" />
                            <label for="special-4">4</label>

                            <input type="checkbox" id="special-5" name="special" value="5" />
                            <label for="special-5">5</label>

                            <input type="checkbox" id="special-6" name="special" value="6" />
                            <label for="special-6">6</label>

                            <input type="checkbox" id="special-7" name="special" value="7" />
                            <label for="special-7">7</label>

                            <input type="checkbox" id="special-8" name="special" value="8" />
                            <label for="special-8">8</label>
                        </div>
                    </div>
                    <button id="selectPeopleBtn" class="selectPeopleBtn disalbledBtn">선택 완료</button>
                </section>
            </section>
        </section>
        </section>
        <!-- ===하단바 영역=== -->
        <section class="bottomBar">
            <article class="barButtonsArea">
                <button class="barButtons staffCallButton">직원호출</button>
                <button class="barButtons"><i class="bottomBarIcon fa-solid fa-house"></i></button>
                <button class="barButtons"><i class="bottomBarIcon fa-solid fa-backward"></i></button>
            </article>
            <img class="logoImg" src="images/logo.png" alt="로고이미지">
            <article class="clockArea"><i class="bottomBarIcon fa-regular fa-clock"></i><span
                    class="timeDisplay">12:00</span>
            </article>
        </section>
        <!-- ==script== -->
        <script>
            const selectPeopleBtn = document.getElementById("selectPeopleBtn");

            // JSON으로 빠져야하는 객체
            const movieData = {
                adult: 0,
                youth: 0,
                special: 0
            };

            // DOM ID 할당 객체
            const headCounterDom = {
                adult: [],
                youth: [],
                special: []
            };

            for (let key in movieData) {
                document.querySelectorAll(`input[name="${key}"]`).forEach((checkbox) => {
                    checkbox.addEventListener('change', (event) => {
                        const checkboxes = document.querySelectorAll(`input[name="${key}"]:checked`);
                        if (checkboxes.length > 0) {
                            switch (event.target.name) {
                                case "adult":
                                    movieData.adult = event.target.value;
                                    break;
                                case "youth":
                                    movieData.youth = event.target.value;
                                    break;
                                case "special":
                                    movieData.special = event.target.value;
                            }
                        } else {
                            movieData[key] = 0;
                        }
                        if ((movieData.adult + movieData.youth + movieData.special) == 0) {
                            selectPeopleBtn.classList.add("disalbledBtn");
                        } else {
                            selectPeopleBtn.classList.remove("disalbledBtn");
                        }
                        console.log(movieData)
                    });
                });
            }

            // inputBox DOM ID 할당 //
            for (let key in headCounterDom) {
                for (let i = 1; i <= 8; i++) {
                    if (document.getElementById(`${key}-${i}`)) {
                        headCounterDom[key].push(document.getElementById(`${key}-${i}`));
                    }
                }
            }

            // 체크박스를 -> 라디오 버튼 기능처럼 사용 //
            for (let key in headCounterDom) {
                headCounterDom[key].forEach((item) => {
                    item.addEventListener("click", (event) => {
                        headCounterDom[key].forEach((item) => {
                            if (item != document.getElementById(event.target.id)) {
                                item.checked = false;
                            }
                        })
                    })
                })
            }

            selectPeopleBtn.addEventListener("click", () => {
                window.location.href = "/select_seat";
            });






        </script>
    </div>
</body>

</html>